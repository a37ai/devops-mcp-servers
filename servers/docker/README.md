# Docker MCP Server

Docker MCP Server is an implementation of the Model Context Protocol (MCP) that provides an intuitive and standardized interface for managing Docker resources. This server leverages the Docker SDK for Python to offer a comprehensive set of tools for interacting with Docker containers, images, networks, and volumes.

---

## Overview

The Docker MCP Server enables users to seamlessly manage Docker environments through a series of asynchronous tools. Whether you need to list running containers, create new images, or configure networks and volumes, this project provides robust endpoints to perform common Docker operations without writing custom Docker commands.

---

## Features

• Container Tools  
  – List containers (with options to include all or only running containers)  
  – Create new containers without starting  
  – Create and run containers  
  – Recreate containers with identical configurations  
  – Start, stop, and remove containers  
  – Fetch container logs

• Image Tools  
  – List all available Docker images  
  – Pull images from registries with tagging support  
  – Push images to registries  
  – Build Docker images from a Dockerfile  
  – Remove images

• Network Tools  
  – List Docker networks with driver and container mapping info  
  – Create new networks with configurable driver and settings  
  – Remove existing networks

• Volume Tools  
  – List all Docker volumes with details such as mount points and creation dates  
  – Create new volumes with driver and label options  
  – Remove volumes with optional force removal

---

## Prerequisites

• Python 3.7 or later  
• Docker installed and running on the host system  
• Docker SDK for Python (install using pip: `pip install docker`)  
• MCP framework module (FastMCP) for the server functionalities

---

## Installation

1. Clone or download the Docker MCP Server repository.
2. Install the required dependencies using pip:

  pip install docker  
  pip install fastmcp

3. Ensure that Docker is installed and that your user has permissions to manage Docker (e.g., by adding your user to the Docker group on Linux).

---

## Configuration

Before running the server, ensure that the Docker daemon is accessible from your environment (e.g., via environment variables generated by Docker or through socket access). The server will attempt to create a Docker client using `docker.from_env()`, and a successful connection will be logged.

---

## Usage

### Running the Server

To start the Docker MCP Server, simply run the main script:

  python docker_mcp_server.py

The server will initialize the MCP instance and establish a connection to the Docker daemon. If the connection fails, an error message will be logged and the process will abort.

### Available MCP Tools

The Docker MCP Server exposes the following tools as asynchronous endpoints:

#### Container Management
• **list_containers(show_all: bool = False)**  
  Lists all containers (optionally including stopped containers). Returns detailed container information as a JSON-formatted string.

• **create_container(image: str, name: Optional[str] = None, command: Optional[str] = None, ports: Optional[Dict[str, str]] = None, environment: Optional[Dict[str, str]] = None, volumes: Optional[Dict[str, str]] = None, detach: bool = True)**  
  Creates a new container without starting it, allowing configuration of ports, environment variables, and volume bindings.

• **run_container(image: str, name: Optional[str] = None, command: Optional[str] = None, ports: Optional[Dict[str, str]] = None, environment: Optional[Dict[str, str]] = None, volumes: Optional[Dict[str, str]] = None, detach: bool = True)**  
  Creates and starts a container with the specified configuration.

• **recreate_container(container_id: str, start: bool = True)**  
  Recreates a container using its current settings. Can optionally start the new container immediately.

• **start_container(container_id: str)**  
  Starts a stopped container.

• **fetch_container_logs(container_id: str, tail: int = 100)**  
  Retrieves log output from a specified container. The log tail can be customized.

• **stop_container(container_id: str, timeout: int = 10)**  
  Stops a running container, with an optional timeout before forceful termination.

• **remove_container(container_id: str, force: bool = False)**  
  Removes a container, with an option to force removal if the container is still running.

#### Image Management
• **list_images()**  
  Provides a JSON-formatted list of all Docker images, including tags, sizes, and creation dates.

• **pull_image(image_name: str, tag: str = "latest")**  
  Fetches a Docker image from a remote registry.

• **push_image(image_name: str, tag: str = "latest")**  
  Pushes a tagged Docker image to a registry. (Authentication configuration can be added as needed.)

• **build_image(path: str, tag: str, dockerfile: str = "Dockerfile", rm: bool = True, nocache: bool = False)**  
  Builds a Docker image from the specified Dockerfile and directory.

• **remove_image(image_id: str, force: bool = False)**  
  Removes a Docker image from the local repository.

#### Network Management
• **list_networks()**  
  Lists all Docker networks along with driver and container information.

• **create_network(name: str, driver: str = "bridge", internal: bool = False, labels: Optional[Dict[str, str]] = None)**  
  Creates a new network with specified settings.

• **remove_network(network_id: str)**  
  Removes an existing Docker network.

#### Volume Management
• **list_volumes()**  
  Lists all Docker volumes with details such as driver, mountpoint, and creation date.

• **create_volume(name: str, driver: str = "local", labels: Optional[Dict[str, str]] = None)**  
  Creates a new Docker volume with specified options.

• **remove_volume(volume_name: str, force: bool = False)**  
  Removes a Docker volume (with an option for force removal).

Each tool is implemented as an asynchronous function and decorated using the MCP framework, making them readily accessible for client interactions.

---

## Logging

The server utilizes Python’s built-in logging module at the INFO level to provide real-time feedback on operations, including success and error messages. Logs are printed to the console, ensuring that administrators can quickly diagnose issues such as failed connections or errors during Docker operations.

---

## Contributing

Contributions and suggestions are welcome. If you encounter any issues, please submit a bug report or feature request.

---

## License

This project is licensed under the terms defined in the LICENSE file.

---

## Acknowledgments

Special thanks to the developers of Docker SDK for Python and the contributors to the Model Context Protocol framework, whose work made this project possible.

---

Docker MCP Server provides a professional and scalable solution for developers and system administrators to manage Docker environments efficiently. Happy Dockering!